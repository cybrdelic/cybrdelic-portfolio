<!-- templates/sections/projects.html -->
<section id="PROJECTS">
    <div class="container">
        <div class="project-console">
            <!-- Fixed description panel -->
            <div class="project-console-left-panel">

                <div class="project-console-animated-icon-container">
                    {% include "components/animated_icons/commit_message_generator.html" %}
                </div>
                <div class="console-description" id="console-description">
                    A curated selection of projects showcasing AI integration, systems architecture, and developer
                    tools.
                </div>

            </div>
            <!-- Projects grid -->
            <div class="projects-grid">
                {% for project in projects %}
                <div class="project-card" data-id="{{ project.id }}" tabindex="0">
                    <!-- Title now comes first in the DOM but will be visually ordered second via CSS -->
                    <div class="project-content">
                        <h3 class="project-title">{{ project.title }}</h3>
                        <!-- Subtitle is now the main bold font -->
                        <div class="project-type">{{ project.subtitle }}<div class="project-more">
                                <span class="more-icon">â†’</span>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const projectCards = document.querySelectorAll('#PROJECTS .project-card');
            const consoleDescription = document.getElementById('console-description');
            const defaultDescription = consoleDescription.textContent;

            // Card reveal animation
            projectCards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('reveal');
                }, 120 * index);
            });

            // Card hover handler for description swap
            projectCards.forEach(card => {
                const projectDescription = card.querySelector('.project-description');

                // Show project description in console on hover
                card.addEventListener('mouseenter', () => {
                    if (projectDescription && projectDescription.dataset.description) {
                        consoleDescription.textContent = projectDescription.dataset.description;
                        consoleDescription.classList.add('active');
                    }
                });

                // Restore default description when not hovering
                card.addEventListener('mouseleave', () => {
                    consoleDescription.textContent = defaultDescription;
                    consoleDescription.classList.remove('active');
                });

                // Card click handler
                card.addEventListener('click', () => {
                    const projectId = card.getAttribute('data-id');
                    window.location.href = `/projects/${projectId}`;
                });

                // Keyboard accessibility
                card.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        const projectId = card.getAttribute('data-id');
                        window.location.href = `/projects/${projectId}`;
                    }
                });
            });
        });
    </script>
</section>
